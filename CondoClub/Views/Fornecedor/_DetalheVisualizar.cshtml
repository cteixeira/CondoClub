@using CondoClub.Web.Models;
@using CondoClub.Web.Controllers;

@model Fornecedor


<div class="header">
    <img class="image" alt="" src="@Url.Action("Avatar", "Ficheiro", 
        new { id = Model.AvatarID, thumbnail = true })"/>
    <span class="title">@Model.Nome</span>
    <span class="subtitle">@Model.Cidade</span>
</div>
<div class="content" style="display:none;">
    <div class="form-readonly">
        <div class="form-1column column-span-3">
            @Html.LabelFor(m => m.Descricao)
            <label class="value">
                @if (!string.IsNullOrEmpty(Model.Descricao))
                {
                    @Model.Descricao
                }
                else
                {
                    @Html.DisplayFor(m => m.Descricao, "CampoVazio")
                }
            </label>
        </div>
        <div class="form-3column">
            <span class="photo">
                <img alt="user" height="60" width="60" src="@Url.Action("Avatar", "Ficheiro", 
                    new { id = Model.AvatarID, thumbnail = false })"/>
            </span>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.Contribuinte)
            <label class="value">
                @if (!string.IsNullOrEmpty(Model.Contribuinte))
                {
                    @Model.Contribuinte
                }
                else
                {
                    @Html.DisplayFor(m => m.Contribuinte, "CampoVazio")
                }
            </label>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.OpcaoPagamentoID)
            <label class="value">
                @if (!string.IsNullOrEmpty(Model.OpcaoPagamentoDesignacao))
                {
                    @Model.OpcaoPagamentoDesignacao
                }
                else
                {
                    @Html.DisplayFor(m => m.OpcaoPagamentoDesignacao, "CampoVazio")
                }
            </label>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.FormaPagamentoID)
            <label class="value">
                @if (!string.IsNullOrEmpty(Model.FormaPagamentoDesignacao))
                {
                    @Model.FormaPagamentoDesignacao
                }
                else
                {
                    @Html.DisplayFor(m => m.FormaPagamentoDesignacao, "CampoVazio")
                }
            </label>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.Telefone)
            <label class="value">
                @if (!string.IsNullOrEmpty(Model.Telefone))
                {
                    @Model.Telefone
                }
                else
                {
                    @Html.DisplayFor(m => m.Telefone, "CampoVazio")
                }
            </label>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.Email)
            <label class="value">
                @if (!string.IsNullOrEmpty(Model.Email))
                {
                    @Model.Email
                }
                else
                {
                    @Html.DisplayFor(m => m.Email, "CampoVazio")
                }
            </label>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.URL)
            <label class="value">
                @if (!string.IsNullOrEmpty(Model.URL))
                {
                    @Model.URL
                }
                else
                {
                    @Html.DisplayFor(m => m.URL, "CampoVazio")
                }
            </label>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.RaioAccao)
            <label class="value">
                @Model.RaioAccao
            </label>
        </div>
        <div class="form-3column">
            <label>@Resources.Servico.ClassificacaoMedia</label>
            @{
                string cssClass = CondoClub.Web.Controllers.ServicoController.ObterCssClassificacao(Model.ClassificacaoMedia);
            }
            <span style="margin-left:5px;" class="rating-stars @cssClass"></span>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.TotalComentarios)
            <label class="value">
                @Model.TotalComentarios
            </label>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.Activo)
            <label class="value">
                @Html.CheckBoxFor(m => m.Activo, new { @disabled = "disabled" })
            </label>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.DataActivacao)
            <label class="value">
                @if (Model.DataActivacao.HasValue)
                {
                    @Model.DataActivacao
                }
                else
                {
                    @Html.DisplayFor(m => m.DataActivacao, "CampoVazio")
                }
            </label>
        </div>
        <div class="form-1column">
            <div class="google-map-supplier"></div>
            <div style="font-size: 0.8em; color: gray; margin-top:5px; margin-bottom:5px;">
                @if (!String.IsNullOrEmpty(Model.Latitude)) { @Html.Raw(String.Concat(Resources.Servico.Latitude, ": ", Model.Latitude, "&nbsp;&nbsp;")) }
                @if (!String.IsNullOrEmpty(Model.Longitude)) { @Html.Raw(String.Concat(Resources.Servico.Longitude, ": ", Model.Longitude)) }
            </div>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.Endereco)
            <label class="value">
                @if (!string.IsNullOrEmpty(Model.Endereco))
                {
                    @Model.Endereco
                }
                else
                {
                    @Html.DisplayFor(m => m.Endereco, "CampoVazio")
                }
            </label>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.Localidade)
            <label class="value">
                @if (!string.IsNullOrEmpty(Model.Localidade))
                {
                    @Model.Localidade
                }
                else
                {
                    @Html.DisplayFor(m => m.Localidade, "CampoVazio")
                }
            </label>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.Cidade)
            <label class="value">
                @if (!string.IsNullOrEmpty(Model.Cidade))
                {
                    @Model.Cidade
                }
                else
                {
                    @Html.DisplayFor(m => m.Cidade, "CampoVazio")
                }
            </label>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.CodigoPostal)
            <label class="value">
                @if (!string.IsNullOrEmpty(Model.CodigoPostal))
                {
                    @Model.CodigoPostal
                }
                else
                {
                    @Html.DisplayFor(m => m.CodigoPostal, "CampoVazio")
                }
            </label>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.Estado)
            <label class="value">
                @if (!string.IsNullOrEmpty(Model.Estado))
                {
                    @Model.Estado
                }
                else
                {
                    @Html.DisplayFor(m => m.Estado, "CampoVazio")
                }
            </label>
        </div>
        <div class="form-3column">
            @Html.LabelFor(m => m.PaisID)
            <label class="value">
                @if (!string.IsNullOrEmpty(Model.PaisDesignacao))
                {
                    @Model.PaisDesignacao
                }
                else
                {
                    @Html.DisplayFor(m => m.PaisDesignacao, "CampoVazio")
                }
            </label>
        </div>
        @Html.HiddenFor(m => m.Latitude)
        @Html.HiddenFor(m => m.Longitude)
        <div id="categoriaContainer_@Model.ID" class="form-1column categorias-container">
            @{ Html.RenderPartial("_ListaCategoria", Model); }
        </div>
        <div id="utilizadorContainer_@Model.ID" class="form-1column" style="padding-top: 0px;">
            <label>@Resources.Servico.Utilizadores</label>
            <div class="separator15"></div>
            @if (Model.Utilizadores.Count == 0)
            {
                <label class="value">@Resources.Servico.SemUtilizadores</label>
            }
            else
            {
                <table class="table inner">
                    @foreach (var u in Model.Utilizadores)
                    {
                        <tr>
                            <td class="col1"><label>@u.Nome</label></td>
                            <td class="col2"><label>@u.Email</label></td>
                            <td class="col3">@if (u.Activo) { <label>@Resources.Geral.Activo</label> } else { <label>@Resources.Geral.Inactivo</label> } </td>
                        </tr>
                    }
                </table>
            }
        </div>
    </div>
     @if (Model.ID != null && (
            Model.Permissoes.Contains(CondoClub.Regras.Fornecedor.Permissao.Gravar) ||
            Model.Permissoes.Contains(CondoClub.Regras.Fornecedor.Permissao.Apagar)
        )) {
        <div class="toolbox-no-border">
            <input type="button" onclick="EditRec(@Model.ID)" class="orange1-button" value="@Resources.Geral.Editar" />
            @Html.ActionLink(Resources.Servico.VerClassificacoes, "Classificacao",
                new { @fornecedorID = Model.ID },
                 new { @class = "orange1-button", @target = "_blank" }
            )
        </div>
        <div class="clear"></div>
    }
</div>